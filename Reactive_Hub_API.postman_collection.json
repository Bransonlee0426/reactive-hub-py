{
	"info": {
		"_postman_id": "reactive-hub-api-collection",
		"name": "Reactive Hub API",
		"description": "FastAPI 應用程式的 API 集合，包含健康檢查端點和系統監控功能。\n\n## 🚀 快速開始\n1. 確保服務器運行在 http://localhost:3001\n2. 使用健康檢查端點驗證系統狀態\n3. 查看 Swagger 文檔：http://localhost:3001/docs\n\n## 📊 端點分類\n- **根端點**：基本資訊和歡迎訊息\n- **健康檢查**：系統和資料庫監控\n- **API v1**：API 探索和資訊端點",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "reactive-hub-api"
	},
	"item": [
		{
			"name": "🏠 根端點",
			"item": [
				{
					"name": "歡迎訊息",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/",
							"host": [
								"{{base_url}}"
							],
							"path": [
								""
							]
						},
						"description": "## 根端點\n\n取得歡迎訊息和基本 API 資訊。\n\n### 回應內容\n- 歡迎訊息\n- 服務狀態\n- 環境資訊\n- API 文檔連結"
					},
					"response": [
						{
							"name": "成功回應",
							"originalRequest": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{base_url}}/",
									"host": [
										"{{base_url}}"
									],
									"path": [
										""
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n    \"message\": \"Welcome to Reactive Hub API!\",\n    \"status\": \"running\",\n    \"environment\": \"development\",\n    \"api_docs\": \"/docs\",\n    \"api_version\": \"/api/v1\"\n}"
						}
					]
				},
				{
					"name": "基本健康檢查",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/health",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"health"
							]
						},
						"description": "## 基本健康檢查\n\n簡單的根層級健康檢查端點。\n\n### 用途\n- 快速確認服務運行狀態\n- 負載均衡器健康檢查\n- 基本監控"
					},
					"response": []
				}
			],
			"description": "應用程式的根層級端點，提供基本資訊和狀態檢查。"
		},
		{
			"name": "📋 API v1 資訊",
			"item": [
				{
					"name": "API v1 端點清單",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/v1/",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								""
							]
						},
						"description": "## API v1 資訊端點\n\n取得 API v1 的完整資訊和可用端點清單。\n\n### 功能\n- 列出所有可用端點\n- API 功能說明\n- 文檔連結\n- 版本資訊\n\n### 適用對象\n- 開發者探索 API\n- 自動化工具發現端點\n- API 整合參考"
					},
					"response": [
						{
							"name": "API v1 資訊回應",
							"originalRequest": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{base_url}}/api/v1/",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"api",
										"v1",
										""
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n    \"message\": \"Welcome to Reactive Hub API API v1\",\n    \"version\": \"1.0.0\",\n    \"environment\": \"development\",\n    \"documentation\": {\n        \"swagger_ui\": \"/docs\",\n        \"redoc\": \"/redoc\"\n    },\n    \"available_endpoints\": {\n        \"health_check\": \"/api/v1/health\",\n        \"simple_health\": \"/api/v1/health/simple\",\n        \"database_health\": \"/api/v1/health/database\"\n    },\n    \"features\": [\n        \"Comprehensive Health Monitoring\",\n        \"Database Connectivity Checks\",\n        \"Interactive API Documentation\",\n        \"CORS Support for Frontend Integration\"\n    ]\n}"
						}
					]
				}
			],
			"description": "API v1 的資訊和探索端點。"
		},
		{
			"name": "🏥 健康檢查",
			"item": [
				{
					"name": "綜合健康檢查",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/v1/health/",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"health",
								""
							]
						},
						"description": "## 綜合健康檢查\n\n**最完整的健康檢查端點**，包含服務和資料庫狀態。\n\n### 檢查項目\n- ✅ API 服務狀態\n- ✅ 資料庫連線\n- ✅ 環境資訊\n- ✅ 時間戳記\n- ✅ 版本資訊\n\n### 使用場景\n- 🔍 **監控系統**：全面的服務健康檢查\n- 📊 **儀表板**：顯示系統整體狀態\n- 🚨 **告警系統**：服務異常時觸發告警\n\n### 檢查頻率建議\n- 生產環境：每 30-60 秒\n- 開發環境：每 10-30 秒\n\n**注意：此端點需要資料庫連線，如果資料庫無法連接會返回 unhealthy 狀態。**"
					},
					"response": [
						{
							"name": "健康狀態 - 正常",
							"originalRequest": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{base_url}}/api/v1/health/",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"api",
										"v1",
										"health",
										""
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n    \"status\": \"healthy\",\n    \"service\": \"Reactive Hub API\",\n    \"environment\": \"development\",\n    \"database\": \"connected\",\n    \"timestamp\": \"2025-06-30T14:34:29.822549Z\",\n    \"version\": \"1.0.0\",\n    \"api_docs\": \"/docs\"\n}"
						}
					]
				},
				{
					"name": "簡單健康檢查",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/v1/health/simple",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"health",
								"simple"
							]
						},
						"description": "## 簡單健康檢查\n\n**最輕量的健康檢查**，只檢查 API 服務本身。\n\n### 檢查項目\n- ✅ API 服務運行狀態\n- ✅ 基本回應時間\n- ✅ 時間戳記\n\n### 不檢查項目\n- ❌ 資料庫連線（更快的回應）\n- ❌ 外部服務依賴\n\n### 使用場景\n- ⚖️ **負載均衡器**：快速檢查服務可用性\n- 🔄 **自動重啟腳本**：確認服務基本運行\n- 📈 **高頻監控**：需要快速回應的檢查\n\n### 檢查頻率建議\n- 負載均衡器：每 5-10 秒\n- 快速監控：每 10-15 秒\n\n**優點：回應速度快，不依賴資料庫**"
					},
					"response": [
						{
							"name": "簡單健康檢查 - 正常",
							"originalRequest": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{base_url}}/api/v1/health/simple",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"api",
										"v1",
										"health",
										"simple"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n    \"message\": \"Reactive Hub API is running\",\n    \"status\": \"healthy\",\n    \"timestamp\": \"2025-06-30T14:24:10.322528Z\"\n}"
						}
					]
				},
				{
					"name": "資料庫健康檢查",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/v1/health/database",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"health",
								"database"
							]
						},
						"description": "## 資料庫健康檢查\n\n**專門的資料庫連線和狀態檢查**。\n\n### 檢查項目\n- ✅ 資料庫連線狀態\n- ✅ PostgreSQL 版本資訊\n- ✅ 連線池狀態\n- ✅ 基本查詢測試\n- ✅ 表格統計資訊\n\n### 使用場景\n- 🗄️ **資料庫管理員**：監控資料庫狀態\n- 🔧 **故障排除**：診斷資料庫連線問題\n- 📊 **效能監控**：追蹤資料庫回應時間\n- 🛠️ **維護作業**：確認資料庫可用性\n\n### 檢查頻率建議\n- 正常監控：每 60 秒\n- 故障排除：每 10-30 秒\n- 維護期間：依需求調整\n\n### 錯誤處理\n- 如果資料庫無法連接：返回 503 Service Unavailable\n- 包含詳細的錯誤資訊以協助故障排除"
					},
					"response": [
						{
							"name": "資料庫狀態 - 正常",
							"originalRequest": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{base_url}}/api/v1/health/database",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"api",
										"v1",
										"health",
										"database"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n    \"database\": \"connected\",\n    \"status\": \"healthy\",\n    \"version\": \"PostgreSQL 15.13 (Debian 15.13-1.pgdg120+1) on aarch64-unknown-linux-gnu, compiled by gcc (Debian 12.2.0-14) 12.2.0, 64-bit\",\n    \"connection_pool\": \"active\",\n    \"timestamp\": \"2025-06-30T14:24:11.962249Z\"\n}"
						},
						{
							"name": "資料庫連線失敗",
							"originalRequest": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{base_url}}/api/v1/health/database",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"api",
										"v1",
										"health",
										"database"
									]
								}
							},
							"status": "Service Unavailable",
							"code": 503,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n    \"detail\": {\n        \"database\": \"disconnected\",\n        \"status\": \"unhealthy\",\n        \"error\": \"Database connection failed: connection refused\",\n        \"timestamp\": \"2025-06-30T14:24:11.962249Z\"\n    }\n}"
						}
					]
				}
			],
			"description": "## 🏥 健康檢查端點\n\n提供多層級的健康檢查功能，適合不同的監控需求：\n\n### 📊 端點比較\n\n| 端點 | 用途 | 檢查項目 | 回應時間 | 建議頻率 |\n|------|------|----------|----------|----------|\n| `/health/` | 全面監控 | 服務+資料庫 | 較慢 | 30-60秒 |\n| `/health/simple` | 快速檢查 | 僅服務 | 最快 | 5-15秒 |\n| `/health/database` | 資料庫監控 | 專門資料庫 | 中等 | 60秒 |\n\n### 🎯 使用建議\n\n- **生產環境監控**：使用 `/health/` 進行全面檢查\n- **負載均衡器**：使用 `/health/simple` 快速檢查\n- **資料庫管理**：使用 `/health/database` 專門監控\n- **開發除錯**：依故障類型選擇合適端點"
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					"// 在每個請求前檢查基礎 URL",
					"if (!pm.variables.get('base_url')) {",
					"    console.log('⚠️  警告：base_url 變數未設定，使用預設值');",
					"    pm.variables.set('base_url', 'http://localhost:3001');",
					"}"
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"exec": [
					"// 全域測試：檢查基本回應",
					"pm.test('回應時間應少於 2000ms', function () {",
					"    pm.expect(pm.response.responseTime).to.be.below(2000);",
					"});",
					"",
					"pm.test('回應應為 JSON 格式', function () {",
					"    pm.expect(pm.response.headers.get('Content-Type')).to.include('application/json');",
					"});",
					"",
					"// 健康檢查特定測試",
					"if (pm.request.url.path.includes('health')) {",
					"    pm.test('健康檢查應包含 status 欄位', function () {",
					"        const jsonData = pm.response.json();",
					"        pm.expect(jsonData).to.have.property('status');",
					"    });",
					"    ",
					"    pm.test('健康檢查應包含 timestamp', function () {",
					"        const jsonData = pm.response.json();",
					"        pm.expect(jsonData).to.have.property('timestamp');",
					"    });",
					"}"
				]
			}
		}
	],
	"variable": [
		{
			"key": "base_url",
			"value": "http://localhost:3001",
			"description": "API 基礎 URL - 可根據部署環境調整"
		}
	]
} 